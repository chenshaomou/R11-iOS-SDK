<html>
    <head>
        <meta charset="utf-8">
            <title>R11 SDK 测试</title>
            <style>
            .box{
                display: flex;
                display: -webkit-flex;
                flex-direction:column;
                width: 100%;
                height: 100%;
            }
            .btn {
                text-align: center;
                background: dodgerblue;
                color: white;
                padding: 10px;
                margin: 10px;
                border-radius: 4px;
                box-shadow: 4px 2px 10px #999;
                flex:0 0 auto;
                font-size: 28px;
                word-wrap: break-word;
            }
            
            #content {
                flex:1 0 30%;
                background: gainsboro;
                font-size: 48px;
            }
            
            #title {
                flex:0 0 auto;
            }
            
            .bts{
                flex:1 1 auto;
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: flex-start;
                align-items: center;
                align-content: flex-start;
            }
            </style>
    </head>
    <body>
        <div class="box">
            <div id= "title">
            <h1 onclick="clean()">点我清除内容</h1>
            </div>
            <div id="content"></div>
            <div class="bts">
                <div class="btn" onclick="callSyn()">同步调用原生插件(不带参数)</div>
                <div class="btn" onclick="callSynArgs()">同步调用原生插件(带参数,字典)</div>
                <div class="btn" onclick="callSynArgsObj()">同步调用原生插件对象(带参数,字典)</div>
                <div class="btn" onclick="callSynStringArgs()">同步调用原生插件(带参数,字符串)</div>
                <div class="btn" onclick="callASynStringArgs()">异步调用原生插件(参数,字符串)</div>
                <div class="btn" onclick="callASyn()">异步调用插件(不带参数)</div>
                <div class="btn" onclick="callASynArgs()">异步调用原生插件(参数,字典)</div>
                <div class="btn" onclick="callASynStoreObj()">异步调用原生插件对象(store对象,字典)</div>
                <div class="btn" onclick="eventOn()">注册事件(不带参数)</div>
                <div class="btn" onclick="eventSend()">发送事件(不带参数)</div>
                <div class="btn" onclick="eventSendArgs()">发送事件(带参数)</div>
                <div class="btn" onclick="eventOff()">取消事件()</div>
                <div class="btn" onclick="promiseASynArgs()">promise异步调用原生插件(参数,字典)</div>
                <div class="btn" onclick="promiseASyn()">promise异步调用插件(不带参数)</div>
                <div class="btn" onclick="promiseObjASyn()">promise异步调用对象插件(不带参数)</div>
                
                <div class="btn" onclick="netRequestGet()">异步调用网络get(不带参数)</div>
                <div class="btn" onclick="netRequestPost()">异步调用网络post(对象)</div>
                
                <div class="btn" onclick="netRequestPostArray()">异步调用网络post(对象)</div>
            </div>
        </div>
    </body>
    <script type="text/javascript">
        
    var deviceReady = true;
        
    function clean() {
        document.getElementById("content").innerHTML=""
    }
    
    window.jsBridge.register('contentappend',function(r){
        var _show = '原生调用js方法 contentappend ' + r + '</br>'
        document.getElementById("content").innerHTML=_show
        return 'call js func success'
    })
    
    // 同步调用原生插件(不带参数)
    function callSyn() {
          if(!deviceReady){
              return
          }
          console.log('同步调用原生插件(不带参数) begin')
          var _result = jsBridge.call('appInfo', 'version', {})
          var _show = '同步调用原生插件 appinfo.version (不带参数) end，原生返回结果：' + _result
          console.log(_show)
          document.getElementById("content").innerHTML=_show
    }
    // 同步调用原生插件(带参数,字典)
    function callSynArgs() {
        if(!deviceReady){
            return
        }
        console.log('同步调用原生插件 store.set (带参数,字典) begin')
        var _result = jsBridge.call('store', 'set', {'foo': 'bar'})
        var _show = '同步调用原生插件 store.set (带参数,字典) end， 原生返回结果：' + _result
        console.log(_show)
        document.getElementById("content").innerHTML=_show
    }
    
    // 同步调用原生插件(带参数,字典)，快捷方式
    function callSynArgsObj() {
        if(!deviceReady){
            return
        }
        console.log('同步调用原生插件 store.set (带参数,字典) begin')
        var _result = jsBridge.store.set({'foo1': 'bar1'})
        var _show = '同步调用原生插件（插件对象）store.set (带参数,字典) end， 原生返回结果：' + _result
        console.log(_show)
        document.getElementById("content").innerHTML=_show
    }
    
    // 同步调用原生插件(带参数,字符串)
    function callSynStringArgs() {
        if(!deviceReady){
            return
        }
        console.log('同步调用原生插件 store.get (带参数,字符串) begin')
        var _result = jsBridge.call('store', 'get', 'foo')
        var _show = '同步调用原生插件(带参数,字符串) store.get end，原生返回结果：' + _result
        console.log(_show)
        document.getElementById("content").innerHTML=_show
    }
    
    // 异步调用原生插件(参数,字符串)
    function callASynStringArgs() {
        if(!deviceReady){
            return
        }
        console.log('异步调用原生插件 store.remove (参数,字符串) begin')
        jsBridge.call('store', 'remove', 'foo1', function (r) {
              var _show = '异步调用原生插件 store.remove (参数,字符串) end，原生返回结果：' + r
              console.log(_show)
              document.getElementById("content").innerHTML= document.getElementById("content").innerHTML + _show
        })
        document.getElementById("content").innerHTML = "此处js方法执行完毕，等待异步执行结果...<br/>"
    }
    
    // 异步调用插件(不带参数)
    function callASyn() {
        if(!deviceReady){
            return
        }
        console.log('异步调用插件(不带参数) begin')
        jsBridge.call('appInfo', 'version', function (r) {
              var _show = '异步调用原生插件 appInfo.version (参数,字符串) end，原生返回结果：' + r
              console.log(_show)
              document.getElementById("content").innerHTML= document.getElementById("content").innerHTML + _show
        })
        document.getElementById("content").innerHTML = "此处js方法执行完毕，等待异步执行结果...<br/>"
    }
    
    // 异步调用原生插件(参数,字典)
    function callASynArgs() {
        if(!deviceReady){
            return
        }
        console.log('异步调用原生插件 store.set (参数,字典) begin')
        jsBridge.call('store', 'set', {'foo': 'bar'}, function (r) {
              var _show = '异步调用原生插件 store.set (参数,字符串) end，原生返回结果：' + r
              console.log(_show)
              document.getElementById("content").innerHTML= document.getElementById("content").innerHTML + _show
        })
        document.getElementById("content").innerHTML = "此处js方法执行完毕，等待异步执行结果...<br/>"
    }
    
    // 异步调用原生插件(store对象,字典)
    function callASynStoreObj() {
        if(!deviceReady){
            return
        }
        console.log('异步调用原生插件(store对象,字典) begin')
        jsBridge.store.set({'foo': 'bar'}, function (r) {
           var _show = '异步调用原生插件对象 store.set (参数,字符串) end，原生返回结果：' + r
           console.log(_show)
           document.getElementById("content").innerHTML= document.getElementById("content").innerHTML + _show
        })
        document.getElementById("content").innerHTML = "此处js方法执行完毕，等待异步执行结果...<br/>"
    }
    
    // 监听事件(不带参数)
    function eventOn() {
        if(!deviceReady){
            return
        }
        console.log('注册事件(不带参数) begin')
        jsBridge.on('onResume', function(r){
            document.getElementById("content").innerHTML = "onResume 事件...<br/>"
        })
    }
    
    // 发送事件(不带参数)
    function eventSend() {
        if(!deviceReady){
            return
        }
        console.log('发送事件(不带参数) begin')
        var _result = jsBridge.send('testEvent')
        console.log('发送事件(不带参数) end，原生返回结果：' + _result)
    }
    // 发送事件(带参数)
    function eventSendArgs() {
        if(!deviceReady){
            return
        }
        console.log('发送事件(带参数) begin')
        var _result = jsBridge.send('testEvent', {'height': 100})
        console.log('发送事件(带参数) end，原生返回结果：' + _result)
    }
    // 取消事件()
    function eventOff() {
        if(!deviceReady){
            return
        }
        console.log('取消事件() begin')
        var _result = jsBridge.off('onResume')
        document.getElementById("content").innerHTML = "onResume 事件取消<br/>"
        console.log('取消事件() end，原生返回结果：' + _result)
    }
    
    // promise 方式调用带参数
    function promiseASynArgs() {
        window.jsBridge.promise('store','set',{'foo2':'bar2'}).then(function(r){
            var _show = document.getElementById("content").innerHTML + '异步 promise 调用原生插件对象 store.set (参数,字符串) end，原生返回结果：' + r
            console.log(_show)
            document.getElementById("content").innerHTML= _show
        })
        document.getElementById("content").innerHTML = "此处js方法执行完毕，等待异步执行结果...<br/>"
    }
    
    // promise 方式调用不带参数
    function promiseASyn() {
        window.jsBridge.promise('store','get','foo2').then(function(r){
            var _show = document.getElementById("content").innerHTML + '异步 promise 调用原生插件对象 store.get (参数,字符串) end，原生返回结果：' + r
            console.log(_show)
            document.getElementById("content").innerHTML= _show
        })
        document.getElementById("content").innerHTML = "此处js方法执行完毕，等待异步执行结果...<br/>"
    }
    
    // promise 对象插件
    function promiseObjASyn() {
        window.jsBridge.appInfo.versionPromise().then(function(r){
          var _show = document.getElementById("content").innerHTML + '异步 promise 调用原生插件对象 appInfo.versionPromise (参数,字符串) end，原生返回结果：' + r
          console.log(_show)
          document.getElementById("content").innerHTML= _show
        })
        document.getElementById("content").innerHTML = "此处js方法执行完毕，等待异步执行结果...<br/>"
    }
    
    // net Request get
    function netRequestGet() {
        if(!deviceReady){
            return
        }
        console.log('异步调用原生插件 network.request get begin')
        jsBridge.call('network', 'request',{'url':'https://postman-echo.com/get?test=123'} ,function (r) {
          var _show = '异步调用原生插件 network.request get end，原生返回结果：' + r
          console.log(_show)
          document.getElementById("content").innerHTML= document.getElementById("content").innerHTML + _show
          })
        document.getElementById("content").innerHTML = "此处js方法执行完毕，等待异步执行结果...<br/>"
    }
    
    // net Request post
    function netRequestPost() {
        if(!deviceReady){
            return
        }
        console.log('异步调用原生插件 network.request post begin')
        jsBridge.call('network','request',{'url':'https://postman-echo.com/post','data':{'foo':'bar'},'method':'post','headers':{'Content-Type':'application/json'}} ,function (r) {
          var _show = '异步调用原生插件 network.request post end，原生返回结果：' + r
          console.log(_show)
          document.getElementById("content").innerHTML= document.getElementById("content").innerHTML + _show
          })
          document.getElementById("content").innerHTML = "此处js方法执行完毕，等待异步执行结果...<br/>"
    }
    
    // 测试
    function netRequestPostArray() {
        if(!deviceReady){
            return
        }
        console.log('异步调用原生插件 network.request post begin')
        jsBridge.call('network','request',{'url':'http://121.40.220.225/api/Prepare/AddOrUpdateStepRecord','data':[{'RECORD_FLIGHT_ID':'2C5EC88880BD4A18B35B40E8CDDAD252','STEP_ID':'0012'},{'RECORD_FLIGHT_ID':'D5EBC4E6D4F8407FAE29AC0EDF70BFA6','STEP_ID':'0012'},{'RECORD_FLIGHT_ID':'381B2F93078D4DAAB15B5EF8F10B7F86','STEP_ID':'0012'},{'RECORD_FLIGHT_ID':'15DE476EF4FE45F78A2CD96B01B6D3BD','STEP_ID':'0012'},{'RECORD_FLIGHT_ID':'B652C5C6233D47E099C82CDD6CB8A190','STEP_ID':'0012'},{'RECORD_FLIGHT_ID':'349A7252A0BA49BF949351ED4DB68BD3','STEP_ID':'0012'},{'RECORD_FLIGHT_ID':'0D82EA967D26428DBD2B857891FD66AD','STEP_ID':'0012'},{'RECORD_FLIGHT_ID':'3C6DC667D0F54876AB560A14830E4A2D','STEP_ID':'0012'},{'RECORD_FLIGHT_ID':'FBE64D92B62A461DB31AD2A51DC9AD20','STEP_ID':'0012'}],'method':'post','headers':{'Content-Type':'application/json','Authorization':'Bearer Lq8532Aot_TzUvJeJm9M0jdxT7zaktDzQyIoUmjIojqDKm6GEfe9yokETefywOF7a3foca8LdfctCgNwUKqmHA-wpgfa1nZBsyrxzU6rTWr85DEcD1cA3O9vaRa5SjO8eiyDlCFO6jvjB5_-VGtqlfAi7L_URMtarPFJyfA2uxBQ-WB3V6qwI2g4NigyVc-hfOZWZsTE17WZe3d8qkB9AhmQogUt4McX1z1Sf9tm_VLZRJA4QCt0oTNASFl1EDkrFhG6PDo0gsynKT4y7IYS0zsybYMbzZmXOPb-6kN_6hfse-pXfxd1VorNIZlnhxcrIX5ShXdIO2i7EHGDRLHzVm7swnKoWYZhb0zFi5FQPscv7C2NZKm9DLrq-fRmZq3mjDw8ozdRDgFxinG59xHrO0VwW9cZzV4luRyWU8yQPd1ZICc5F-rXsmtQxH6kBHf1aTk8Z2Ns8Z4iUxyFbtIhplCFcITigq4R0ZxbofchntjyJTwDdsYswUv8XteoQ7mXlk9xywzrap8hMHpiMZwL29GuzLi2Z_5xVGuhmWJQIT6RMfmq90cXhE2qEa70s0z-25IEtOjK7ORsb41QSAkSo9KW966ZLk21x0mJiSgLfWe_ihVjoVe5YTEfGvQXqQCJTJyWKR-5LMzfdmNG0JAA9FZstdF3otU7OFbU9T4Moj78nUFVMgZO-WP-cYpcFDACFNN_9hnnLjf15ZITRcDf71uInuxBetSzRNDlorsi7430Q92ZHmNKLcH2Bd4gepjexzxA9d3Uqocx1inP0AgpcTPR1DQwA_6jc42j0mGWm2w'}} ,function (r) {
                      var _show = '异步调用原生插件 network.request post end，原生返回结果：' + r
                      console.log(_show)
                      document.getElementById("content").innerHTML= document.getElementById("content").innerHTML + _show
                      })
                      document.getElementById("content").innerHTML = "此处js方法执行完毕，等待异步执行结果...<br/>"
    }
    
    </script>
</html>

